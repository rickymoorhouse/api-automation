name: Deploy API
on: [push]
jobs:

  build:
    name: Deploy API
    runs-on: ubuntu-latest
    steps:

    - name: Check out code
      uses: actions/checkout@v1

    - name: Get APIC Toolkit
      run: |
        curl -LO https://manager.6ebe-65eb6541.eu-gb.apiconnect.test.cloud.ibm.com/client-downloads/toolkit-linux.tgz
        tar -vzxf toolkit-linux.tgz
        ls -l
        chmod a+x apic-slim

    - name: Get IAM token
      env:
        API_KEY: ${{ secrets.api_key }}
      run: |
        touch ~/.apiconnect/token
